# Aligned CityBench
CityBench is a java-based benchmarking toolset for RSP engines, currently CQELS and C-SPARQL are supported.

##Prerequisite
* JVM 1.7
* Java IDE (for debugging and extensions)

##Folders & Files
1. *cqels_query*: sample queries in CQELS syntax;
2. *csparql_query*: sample queries in C-SPARQL syntax;
3. *rspql_query*: sample queries in RSP-QL syntax;
4. *unsupported_query*: sample queries in for unsupported query languages;
5. *dataset*: background knowledge base, mostly sensor service repositories;
6. *ontology*: ontologies used;
7. *lib*: libraries used;
8. *result_log*: output files generated by CityBench, e.g., query latency, result count, memory consumption, number of unique obIds, completeness, and estimated throughput;
9. *src*: source code;
10. *streams*: sensor observation raw data in .csv formats, used to generate RDF streamsï¼›
11. *EC-log*: logger file output;
12. *citybench.properties*: configuration file loaded by CityBench.

##To run
1. Provide 'CQELS_DB' folder if you want to run CQELS experiments
2. Run ISWC2015-CityBench.jar with suitable arguments **OR**
3. Import the project to your Java IDE and integrate all libraries (provided as jars in the li-folder) as dependencies
4. Run CityBench.java

##Configuration file
* dataset = dataset/[your_sensor_repository_file]  // tell CityBench where to look for static background knowledge.
* ontology = [your_ontology_folder] // tell CityBench where to look for ontologies used.
* streams = [your_streams_folder] // tell CityBench where to look for raw data to simulate sensor streams.
* cqels_query = [your_cqels_queries_folder] // tell CityBench where to look for cqels queries.
* csparql_query = [your_csparql_queries_folder] // tell CityBench where to look for csparql queries.
* rspql_query = [your_rspql_queries_folder] // tell CityBench where to look for rspql queries.
* unsupported_query = [your_unsupported_queries_folder] // tell CityBench where to look for unsupported queries.

// All paths are relative path to the project root

##Program Parameters
Acceptable params: 
* _rate_ = (double)x, // sensor stream acceleration rate (based on real world sensor observation intervals)
* _frequency_ = (double)c.  // fixed frequency for sensors, only has effects when rate=1.0
* _queryDuplicates_ = (int)y, // number of duplicates to run concurrently
* _duration_ = (long)z,  // duration of the experiment in milliseconds
* _startDate_ = (date in the format of "yyyy-MM-dd'T'HH:mm:ss")a, // start time of the sensor observations used
* _endDate_ = (date in the format of "yyyy-MM-dd'T'HH:mm:ss")b,  // ending time of the sensor observations used
* _query_ = (String)q // file name of the query to run (under cqels_query, csparql_query, or rdfox_query)
* _engineName_ = (String)e, specify engine name for publishing of results
* _queryLanguage_ = (String)"rspql" or "csparql" or "unsupported", (default: unsupported) //query language that is used for providing the configuration. If query language is supported just the necessary queries are provided in the configurations, otherwise serialized query-objects are provided.
* _rdfFormat_ = (String)"ntriples" or "turtle" or "rdfxml", (default: turtle) //specifies the transmission format for the RDF data stream
* _waitingTime_ = (Integer)w, (default: 10000) //specifies how long the benchmark waits for the SR engine to write its last answers
* _configPath_ = (String)c, (default: "http://localhost:11111/configuration.json") //specifies where the benchmark publishes the configuration
* _answerPath_ = (String)a, (default: "http://localhost:11112/answers.json") //specifies where the benchmark expects the answers of the engine
* _resultsPath_ = (String)r, (default: "http://localhost:11113/results.html") //specifies where the benchmark publishes the results of the experiment

engineName, start and end dates are mandatory.

**Example configuration:**
`java -jar ISWC2015-CityBench.jar` startDate=2014-08-11T11:00:00 endDate=2014-08-31T11:00:00 query=Q1.txt frequency=1 queryDuplicates=1 duration=7s engineName=csparql queryLanguage=csparql waitingTime=13000 answerPath=http://localhost:11112/answers.json configPath=http://localhost:11111/configuration.json
